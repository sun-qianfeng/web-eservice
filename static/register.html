<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Abbott Hotel</title>
  <meta name="description" content="Abbott hotel">
  <meta name="author" content="Abbott hotel">
  <meta name="Keywords" content="Abbott, hotel">
  <!-- boostrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200">
  <link rel="stylesheet" href="style/main.css">
  <link rel="stylesheet" href="style/register.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
  <script>
    $(document).ready(function () {

      var errorReg = '';
      $("#btn").click(function () {
        var email = $("input[name=email]").val();
        var password = $("input[name=password]").val();
        var password2 = $("input[name=repassword]").val();
        var fn = $("input[name=firstname]").val();
        var ln = $("input[name=lastname]").val();
        var addres = $("input[name=address]").val();
        var tel = $("input[name=telephone]").val();


        let pwPattern = /^.{8,16}$/;
        if (!password.match(pwPattern)) {
          showModalPopup("passwords length should be between 8 and 16");
          return;
        }
        let emailpattern = /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
        if (!email.match(emailpattern)) {
          showModalPopup("Invalid Email");
          return;

        }

        if (password != password2) {
          showModalPopup("Password should be the same");
          return;

        }
        // FIXME: verify values are valid
        var user = { Role: "customer", UserEmail: email, UserAddress: addres, UserTel: tel, Password: password, FirstName: fn, LastName: ln, UserTier: "normal" };

        $.ajax({ // FIXME: escape special characters using urlencode
          url: "/api/users",
          type: "POST",
          dataType: "json",
          data: user,
          error: function (jqxhr, status, errorThrown) {
            alert("AJAX error: " + jqxhr.responseText);
          }
        }).done(function (userList) {
          alert(userList.UserEmail + " registered successfully. You may now login.");
          window.location.assign("login.html");

        }).fail(function () {
          console.log("error adding ");

        });
      });

      //password eye
      const togglePassword = document.querySelector("#togglePassword");
      const password = document.querySelector("#password");
      togglePassword.addEventListener("click", function () {
        // toggle the type attribute
        const type = password.getAttribute("type") === "password" ? "text" : "password";
        password.setAttribute("type", type);
        // toggle the icon
        this.classList.toggle("bi-eye");
      });
      //repassword eye
      const retogglePassword = document.querySelector("#retogglePassword");
      const repassword = document.querySelector("#repassword");
      retogglePassword.addEventListener("click", function () {
        // toggle the type attribute
        const type = repassword.getAttribute("type") === "password" ? "text" : "password";
        repassword.setAttribute("type", type);
        // toggle the icon
        this.classList.toggle("bi-eye");
      });

      $(".close").click(function () {
        hideModalPopup();
      });

    });
    function showModalPopup(message) {
      $("#modalMessage").text(message);
      $("#myModal").css("display", "block");
    }

    function hideModalPopup() {
      $("#myModal").css("display", "none");
    }
  </script>
</head>

<body class="homepage">
  <!-- header -->
  <nav id="headertop" class="navbar navbar-expand-md py-0">
    <div class="container d-flex align-items-center justify-content-between">
      <a style="font-size: 14px;"><span class="material-symbols-outlined">
          distance
        </span>88
        LUX
        ST.,MONTRELA,QC</a>

      <div class="navbar-nav ms-auto">
        <select class="form-select languageselect" aria-label="Default select example" style="font-size:14px">
          <option selected>English</option>
          <option value="1">French</option>
          <option value="2">Chinese</option>
          <option value="3">Spanish</option>
        </select>
        <select class="form-select languageselect" aria-label="Default select example" style="font-size:14px">
          <option selected>CAD</option>
          <option value="1">US</option>
          <option value="2">EURO</option>
          <option value="3">CNY</option>
        </select>
      </div>
      <div><a id="aid" href="login.html">Log in</a></div>
    </div>
  </nav>


  <!-- menu bar -->
  <nav id="header" class="navbar navbar-expand-md">

    <div class="container">
      <a class="navbar-brand" href="index.html"><img src="images/logohotel.png" alt="Abbott Hotel logo"></a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMainHeader"
        aria-controls="navbarMainHeader" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarMainHeader">
        <ul id="menulist" class="navbar-nav ms-auto ">
          <li class="nav-item me-0.5">
            <a class="nav-link active" aria-current="page" href="aboutus.html">About us</a>
          </li>
          <li class="nav-item mx-0.5">
            <a class="nav-link" href="dinning.html">Dinning</a>
          </li>
          <li class="nav-item mx-0.5">
            <a class="nav-link" href="#">Spa</a>
          </li>
          <li class="nav-item mx-0.5">
            <a class="nav-link" href="rooms.html">Rooms</a>
          </li>
          <li class="nav-item mx-0.5">
            <a class="nav-link" href="#">Events</a>
          </li>
          <li class="nav-item mx-0.5 d-flex">
            <div class="btn-group mx-auto dropstart">
              <button type="button" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown"
                aria-expanded="false" data-bs-auto-close="outside">
                Book Now
              </button>
              <form class="dropdown-menu p-4" action="http://jac.stephmoreau.ca/submitForm/" method="post">
                <div class="mb-3">
                  <label for="checkin" class="form-label">Arrival</label>
                  <input type="date" class="form-control" id="checkin">
                </div>
                <div class="mb-3">
                  <label for="checkout" class="form-label">Departure</label>
                  <input type="date" class="form-control" id="checkout">
                </div>
                <div class="mb-3">
                  <label for="num-guests" class="form-label">Adults</label>
                  <select id="num-guests" name="num-guests">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                  </select>
                </div>
                <div class="mb-3">
                  <label for="roomtype" class="form-label">Room Type</label>
                  <select id="roomtype" name="roomtype" required>
                    <option value="">--Select Room Type--</option>
                    <option value="courtyyard">Super Courtyard King</option>
                    <option value="seventy-seven">Seventy Seven King</option>
                    <option value="more">More Options</option>
                  </select>
                </div>
                <button type="submit" class="btn btn-primary">Confirm</button>
              </form>
            </div>
          </li>
          <li>
            <a href="index.html"><img class="locationimg" src="images/search.png" alt="search icon"></a>
          </li>

        </ul>
      </div>
    </div>
  </nav>
  <center>

    <div id="register">
      <h1>Create an account</h1>
      <input type="text" name="email" id="email" placeholder="Email Address" />
      <input type="text" name="firstname" id="firstname" placeholder="First Name" />
      <input type="text" name="lastname" id="lastname" placeholder="Last Name" />
      <input type="text" name="address" id="address" placeholder="Address" />
      <input type="text" name="telephone" id="telephone" placeholder="Telephone" />
      <input type="password" name="password" id="password" placeholder="Password" />
      <i class="bi bi-eye-slash" id="togglePassword"></i>
      <input type="password" name="repassword" id="repassword" placeholder="Password Confirm" />
      <i class="bi bi-eye-slash" id="retogglePassword"></i>

      <label id="keep" class="container">Keep me signed in
        <input type="checkbox" checked="checked" />
        <span class="checkmark"></span>
      </label>
      <p>
        Selecting this checkbox will keep you signed into your account on this
        device until you sign out. Do not select this on shared devices.
        <br />
        <br />
        By signing in, I agree to the Abbott Terms and Conditions, Privacy
        Statement and Abbott Rewards Terms and Conditions.
      </p>
      <button id="btn">Register</button>
      <p style="color: #145991; text-align: center">
        <u>Forgot password?</u>
      </p>
      <p style="text-align: center">
        Don't have an account?<a href="./register.html" id="res">Create one</a>
      </p>
    </div>
    <div id="myModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <p id="modalMessage"></p>
      </div>
    </div>

  </center>
  <footer class="bg-secondary" id="footer">
    <div class="container">
      <div class="row">
        <!-- Newsletter -->
        <div class="col-12 col-md-6 order-md-3">
          <div class="input-group">
            <input type="email" class="form-control" placeholder="What's your email?" aria-label="What's your email?"
              aria-describedby="btn-newsletter">
            <button class="btn btn-primary" type="button" id="btn-newsletter">Sign Up</button>
          </div>
        </div>

        <!-- footer nav -->
        <div id="container1" class="col-9 col-md-6 order-md-4 d-flex justify-content-end align-items-center">
          <a href="#" title="Abbott Hotel Reviews" class="mx-2 text-decoration-none">Reviews</a>
          <span class="mx-2">|</span>
          <a href="#" title="Frequently Asked Questions" class="mx-2 text-decoration-none">FAQ</a>
          <span class="mx-2">|</span>
          <a href="mailto:info@abbotthotel.com" class="mx-2 text-decoration-none">Contact us</a>
        </div>

      </div><!-- end row -->
      <!-- Copyright -->
      <div class="row">
        <div class="col-12 text-center mt-2">
          <small>Copyright Â© 2023 Abbott Hotel. All Rights Reserved. </small>
        </div>
      </div>
    </div>
  </footer>
  <!-- bootstrap -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
    crossorigin="anonymous"></script>
  <!-- jquery -->
  <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
  <script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>

</body>

</html>